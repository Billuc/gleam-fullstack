var p=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},T=class{static fromArray(t,r){let n=r||new jt;for(let i=t.length-1;i>=0;--i)n=new Ze(t[i],n);return n}[Symbol.iterator](){return new Tr(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function _(e,t){return new Ze(e,t)}function a(e,t){return T.fromArray(e,t)}var Tr=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof jt)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},jt=class extends T{},Ze=class extends T{constructor(t,r){super(),this.head=t,this.tail=r}},Et=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return Js(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return Hs(this.buffer,t,r,n,i)}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function Hs(e,t,r,n,i){let s=0;if(n)for(let o=t;o<r;o++)s=s*256+e[o];else for(let o=r-1;o>=t;o--)s=s*256+e[o];if(i){let l=2**((r-t)*8-1);s>=l&&(s-=l*2)}return s}function Js(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var qe=class e extends p{static isResult(t){return t instanceof e}},c=class extends qe{constructor(t){super(),this[0]=t}isOk(){return!0}},f=class extends qe{constructor(t){super(),this[0]=t}isOk(){return!1}};function h(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Kn(n)||!Kn(i)||!eo(n,i)||Ws(n,i)||Vs(n,i)||Ys(n,i)||Zs(n,i)||Xs(n,i)||Qs(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=Ks(n);for(let d of l(n))r.push(u(n,d),u(i,d))}return!0}function Ks(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Ws(e,t){return e instanceof Date&&(e>t||e<t)}function Vs(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Ys(e,t){return Array.isArray(e)&&e.length!==t.length}function Zs(e,t){return e instanceof Map&&e.size!==t.size}function Xs(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Qs(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Kn(e){return typeof e=="object"&&e!==null}function eo(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ae(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let l in s)o[l]=s[l];return o}var $=class extends p{constructor(t){super(),this[0]=t}},w=class extends p{};function Xe(e,t){if(e instanceof $){let r=e[0];return new c(r)}else return new f(t)}function Qe(e){return e>=0?e:e*-1}function oe(e){return Vn(e)}function g(e){return Yn(e)}function N(e,t){if(e.isOk()){let r=e[0];return new c(t(r))}else{let r=e[0];return new f(r)}}function Ne(e,t){if(e.isOk()){let r=e[0];return new c(r)}else{let r=e[0];return new f(t(r))}}function z(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new f(r)}}function L(e,t){return z(e,t)}function Cr(e){return Ne(e,t=>{})}function et(e,t){if(e.isOk()){let r=e[0];return new c(r)}else return new f(t)}function xe(e){return Nr(e)}function fe(e){return e}function Pr(e){return ti(e)}function ge(e){return qr(e)}function it(e,t){return ni(e,t)}function st(e){let r=xe(e);return fe(r)}function Y(e,t){return ri(e,t)}function Qn(e,t,r){let i=Mt(e),s=ot(i,t),o=Ir(s,r);return st(o)}function ei(e,t,r){if(r<0)return"";if(t<0){let s=Pr(e)+t;return s<0?"":Qn(e,s,r)}else return Qn(e,t,r)}function qt(e,t){return t<0?e:ei(e,t,Pr(e)-t)}var U=class extends p{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Nt(e){return new c(e)}function ut(e){return Hr(e)}function at(e){return ui(e)}function ao(e){return pi(e)}function si(e,t){let r=e===1?"":"s",n=(()=>{let i=a(["Tuple of at least ",g(e)," element",r]),s=xe(i),o=fe(s);return new U(o,ut(t),a([]))})();return new f(a([n]))}function zt(e){return t=>{if(e.hasLength(0))return new f(a([new U("another type",ut(t),a([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new c(s)}else return zt(n)(t)}}}function lt(e){return e.isOk()?a([]):e[0]}function Dr(e,t){let r=t,n=zt(a([G,s=>N(at(s),g)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=a(["<",ut(r),">"]),l=xe(o);return fe(l)}})();return e.withFields({path:_(i,e.path)})}function Pt(e){return t=>z(ao(t),r=>{let i=rt(r,e);return Br(i,s=>Dr(s,"*"))})}function Br(e,t){return Ne(e,r=>v(r,t))}function G(e){return li(e)}function D(e,t){return r=>{let n=new U("field","nothing",a([]));return z(ci(r,e),i=>{let o=Xe(i,a([n])),l=z(o,t);return Br(l,u=>Dr(u,e))})}}function oi(e,t){return r=>z(ai(r),n=>{let i=nt(n);return z(e>=0?e<i?Gr(n,e):si(e+1,r):Qe(e)<=i?Gr(n,i+e):si(Qe(e),r),s=>{let o=t(s);return Br(o,l=>Dr(l,e))})})}function Rr(e,t,r){return n=>{let i=t(n),s=r(n);if(i.isOk()&&s.isOk()){let o=i[0],l=s[0];return new c(e(o,l))}else{let o=i,l=s;return new f(Jr(a([lt(o),lt(l)])))}}}function Ur(e,t,r,n){return i=>{let s=t(i),o=r(i),l=n(i);if(s.isOk()&&o.isOk()&&l.isOk()){let u=s[0],d=o[0],m=l[0];return new c(e(u,d,m))}else{let u=s,d=o,m=l;return new f(Jr(a([lt(u),lt(d),lt(m)])))}}}var fi=new WeakMap,Kr=new DataView(new ArrayBuffer(8)),Wr=0;function Vr(e){let t=fi.get(e);if(t!==void 0)return t;let r=Wr++;return Wr===2147483647&&(Wr=0),fi.set(e,r),r}function Yr(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Xr(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function di(e){Kr.setFloat64(0,e);let t=Kr.getInt32(0),r=Kr.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function co(e){return Xr(e.toString())}function fo(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Vr(e);if(e instanceof Date)return di(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+B(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+B(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Yr(B(n),B(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Yr(B(o),Xr(s))|0}}return r}function B(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return di(e);case"string":return Xr(e);case"bigint":return co(e);case"object":return fo(e);case"symbol":return Vr(e);case"function":return Vr(e);default:return 0}}var ee=5,Qr=Math.pow(2,ee),_o=Qr-1,$o=Qr/2,mo=Qr/4,q=0,Q=1,P=2,ye=3,en={type:P,bitmap:0,array:[]};function pt(e,t){return e>>>t&_o}function Gt(e,t){return 1<<pt(e,t)}function ho(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function tn(e,t){return ho(e&t-1)}function R(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function wo(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Zr(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function _i(e,t,r,n,i,s){let o=B(t);if(o===n)return{type:ye,hash:o,array:[{type:q,k:t,v:r},{type:q,k:i,v:s}]};let l={val:!1};return ct(rn(en,e,o,t,r,l),e,n,i,s,l)}function ct(e,t,r,n,i,s){switch(e.type){case Q:return xo(e,t,r,n,i,s);case P:return rn(e,t,r,n,i,s);case ye:return go(e,t,r,n,i,s)}}function xo(e,t,r,n,i,s){let o=pt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Q,size:e.size+1,array:R(e.array,o,{type:q,k:n,v:i})};if(l.type===q)return h(n,l.k)?i===l.v?e:{type:Q,size:e.size,array:R(e.array,o,{type:q,k:n,v:i})}:(s.val=!0,{type:Q,size:e.size,array:R(e.array,o,_i(t+ee,l.k,l.v,r,n,i))});let u=ct(l,t+ee,r,n,i,s);return u===l?e:{type:Q,size:e.size,array:R(e.array,o,u)}}function rn(e,t,r,n,i,s){let o=Gt(r,t),l=tn(e.bitmap,o);if(e.bitmap&o){let u=e.array[l];if(u.type!==q){let m=ct(u,t+ee,r,n,i,s);return m===u?e:{type:P,bitmap:e.bitmap,array:R(e.array,l,m)}}let d=u.k;return h(n,d)?i===u.v?e:{type:P,bitmap:e.bitmap,array:R(e.array,l,{type:q,k:n,v:i})}:(s.val=!0,{type:P,bitmap:e.bitmap,array:R(e.array,l,_i(t+ee,d,u.v,r,n,i))})}else{let u=e.array.length;if(u>=$o){let d=new Array(32),m=pt(r,t);d[m]=rn(en,t+ee,r,n,i,s);let k=0,j=e.bitmap;for(let C=0;C<32;C++){if(j&1){let vt=e.array[k++];d[C]=vt}j=j>>>1}return{type:Q,size:u+1,array:d}}else{let d=wo(e.array,l,{type:q,k:n,v:i});return s.val=!0,{type:P,bitmap:e.bitmap|o,array:d}}}}function go(e,t,r,n,i,s){if(r===e.hash){let o=nn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:ye,hash:r,array:R(e.array,o,{type:q,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:ye,hash:r,array:R(e.array,l,{type:q,k:n,v:i})}}return ct({type:P,bitmap:Gt(e.hash,t),array:[e]},t,r,n,i,s)}function nn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(h(t,e.array[n].k))return n;return-1}function Ft(e,t,r,n){switch(e.type){case Q:return yo(e,t,r,n);case P:return bo(e,t,r,n);case ye:return ko(e,n)}}function yo(e,t,r,n){let i=pt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==q)return Ft(s,t+ee,r,n);if(h(n,s.k))return s}}function bo(e,t,r,n){let i=Gt(r,t);if(!(e.bitmap&i))return;let s=tn(e.bitmap,i),o=e.array[s];if(o.type!==q)return Ft(o,t+ee,r,n);if(h(n,o.k))return o}function ko(e,t){let r=nn(e,t);if(!(r<0))return e.array[r]}function sn(e,t,r,n){switch(e.type){case Q:return Ao(e,t,r,n);case P:return Oo(e,t,r,n);case ye:return Lo(e,n)}}function Ao(e,t,r,n){let i=pt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===q){if(!h(s.k,n))return e}else if(o=sn(s,t+ee,r,n),o===s)return e;if(o===void 0){if(e.size<=mo){let l=e.array,u=new Array(e.size-1),d=0,m=0,k=0;for(;d<i;){let j=l[d];j!==void 0&&(u[m]=j,k|=1<<d,++m),++d}for(++d;d<l.length;){let j=l[d];j!==void 0&&(u[m]=j,k|=1<<d,++m),++d}return{type:P,bitmap:k,array:u}}return{type:Q,size:e.size-1,array:R(e.array,i,o)}}return{type:Q,size:e.size,array:R(e.array,i,o)}}function Oo(e,t,r,n){let i=Gt(r,t);if(!(e.bitmap&i))return e;let s=tn(e.bitmap,i),o=e.array[s];if(o.type!==q){let l=sn(o,t+ee,r,n);return l===o?e:l!==void 0?{type:P,bitmap:e.bitmap,array:R(e.array,s,l)}:e.bitmap===i?void 0:{type:P,bitmap:e.bitmap^i,array:Zr(e.array,s)}}return h(n,o.k)?e.bitmap===i?void 0:{type:P,bitmap:e.bitmap^i,array:Zr(e.array,s)}:e}function Lo(e,t){let r=nn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:ye,hash:e.hash,array:Zr(e.array,r)}}function $i(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===q){t(s.v,s.k);continue}$i(s,t)}}}var be=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Ft(this.root,0,B(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?en:this.root,s=ct(i,0,B(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=sn(this.root,0,B(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Ft(this.root,0,B(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){$i(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Yr(B(r),B(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&h(t.get(i,!n),n)}),r}};var on=void 0,mi={};function Vn(e){return/^[-+]?(\d+)$/.test(e)?new c(parseInt(e)):new f(on)}function Yn(e){return e.toString()}function ti(e){if(e==="")return 0;let t=gi(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Mt(e){let t=gi(e);return t?T.fromArray(Array.from(t).map(r=>r.segment)):T.fromArray(e.match(/./gsu))}function gi(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function qr(e){return e.toLowerCase()}function ri(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function Nr(e){let t="";for(let r of e)t=t+r;return t}function nt(e){return e.length}function ni(e,t){return e.startsWith(t)}var yi=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),op=new RegExp(`^([${yi}]*)`,"g"),lp=new RegExp(`([${yi}]*)$`,"g");function bi(){return be.new()}function It(e){return T.fromArray(e.entries())}function ki(e,t){let r=e.get(t,mi);return r===mi?new f(on):new c(r)}function Ai(e,t,r){return r.set(e,t)}function Hr(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof qe)return"Result";if(e instanceof T)return"List";if(e instanceof Et)return"BitArray";if(e instanceof be)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function ft(e,t){return vo(e,Hr(t))}function vo(e,t){return new f(T.fromArray([new U(e,t,T.fromArray([]))]))}function li(e){return typeof e=="string"?new c(e):ft("String",e)}function ui(e){return Number.isInteger(e)?new c(e):ft("Int",e)}function ai(e){return Array.isArray(e)?new c(e):ft("Tuple",e)}function Gr(e,t){return t>=0&&e.length>t?new c(e[t]):new f(on)}function pi(e){return Array.isArray(e)?new c(T.fromArray(e)):e instanceof T?new c(e):ft("List",e)}function ci(e,t){let r=()=>ft("Dict",e);if(e instanceof be||e instanceof WeakMap||e instanceof Map){let n=ki(e,t);return new c(n.isOk()?new $(n[0]):new w)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?hi(e,t,()=>new c(new w)):hi(e,t,r)}function hi(e,t,r){try{return t in e?new c(new $(e[t])):r()}catch{return r()}}function V(){return bi()}function Pe(e,t,r){return Ai(t,r,e)}function Eo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function To(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Eo(n,a([]));{let i=r.head;e=r.tail,t=_(i[0],n)}}}function So(e){let t=It(e);return To(t,a([]))}function Dt(e){return So(e)}function Mo(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function un(e){return Mo(e,0)}function qo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function O(e){return qo(e,a([]))}function Rt(e){if(e.hasLength(0))return new f(void 0);{let t=e.head;return new c(t)}}function No(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return O(s);{let o=n.head;e=n.tail,t=i,r=_(i(o),s)}}}function v(e,t){return No(e,t,a([]))}function zo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return O(l);{let u=i.head,d=i.tail,m=_(s(u,o),l);e=d,t=s,r=o+1,n=m}}}function Ut(e,t){return zo(e,t,0,a([]))}function Po(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new c(O(s));{let o=n.head,l=n.tail,u=i(o);if(u.isOk()){let d=u[0];e=l,t=i,r=_(d,s)}else{let d=u[0];return new f(d)}}}}function rt(e,t){return Po(e,t,a([]))}function ot(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return a([]);e=r.tail,t=n-1}}function Io(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return O(s);if(n.hasLength(0))return O(s);{let l=n.head;e=n.tail,t=i-1,r=_(l,s)}}}function Ir(e,t){return Io(e,t,a([]))}function Fo(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function X(e,t){return Fo(O(e),t)}function Go(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function Do(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return O(n);{let i=r.head;e=r.tail,t=Go(i,n)}}}function Jr(e){return Do(e,a([]))}function ke(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Bo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,l),r=o,n=l+1}}}function an(e,t,r){return Bo(e,t,r,0)}function Ro(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new f(void 0);{let o=n.head,l=n.tail,u=i(o);if(u.isOk()){let d=u[0];return new c([d,X(O(s),l)])}else e=l,t=i,r=_(o,s)}}}function Uo(e,t){return Ro(e,t,a([]))}function pn(e,t){return Uo(e,r=>{let n=r[0],i=r[1];if(h(n,t)){let s=n;return new c(i)}else return new f(void 0)})}function Ie(e,t,r){if(e.hasLength(0))return a([[t,r]]);if(e.atLeastLength(1)&&h(e.head[0],t)){let n=e.head[0],i=e.tail;return _([t,r],i)}else{let n=e.head,i=e.tail;return _(n,Ie(i,t,r))}}function le(e,t,r){return e?t:r()}function cn(e){return JSON.stringify(e)}function Li(e){return Object.fromEntries(e)}function vi(e){return e.toArray()}function ji(){return null}function Ei(e){try{let t=JSON.parse(e);return new c(t)}catch(t){return new f(Jo(t,e))}}function Jo(e,t){return Ko(e)?new Jt:Wo(e,t)}function Ko(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Wo(e,t){let r=[Vo,Yo,Xo,Zo];for(let n of r){let i=n(e,t);if(i)return i}return new de("",0)}function Vo(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Ht(r[1]);return new de(n,-1)}function Yo(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Ht(r[1]),i=Number(r[2]);return new de(n,i)}function Zo(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Qo(i,s,t),l=Ht(t[o]);return new de(l,o)}function Xo(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Ht(r[2]);return new de(n,0)}function Ht(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Qo(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Jt=class extends p{},de=class extends p{constructor(t,r){super(),this.byte=t,this.position=r}};var Kt=class extends p{constructor(t){super(),this[0]=t}};function rl(e,t){return L(Ei(e),r=>{let n=t(r);return Ne(n,i=>new Kt(i))})}function dn(e,t){return rl(e,t)}function _n(e){return cn(e)}function _e(e){return e}function dt(e){return e}function Ti(){return ji()}function Wt(e){return Li(e)}function $n(e){return vi(e)}function mn(e,t){let n=v(e,t);return $n(n)}var Vt=class extends p{constructor(t){super(),this.all=t}};function nl(e){return new Vt(a([t=>e(t.dispatch,t.emit,t.select)]))}function Si(e){return nl((t,r,n)=>e(t))}function te(){return new Vt(a([]))}var Fe=class extends p{constructor(t){super(),this.content=t}},y=class extends p{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Le=class extends p{constructor(t){super(),this.subtree=t}},Ge=class extends p{constructor(t,r){super(),this.elements=t,this.key=r}},De=class extends p{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},_t=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};function ol(e){if(e instanceof De)return new f(void 0);{let t=e[0],r=e[1],n=qt(t,2);return new c([n,r])}}function Ci(e,t,r){return an(e,t,(n,i,s)=>{let o=r+"-"+g(s);return Mi(i,n,o)})}function Mi(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof Fe)return i;if(n instanceof Le){let o=n.subtree;e=o(),t=i,r=s}else if(n instanceof y){let o=n.attrs,l=n.children,u=ke(o,i,(d,m)=>{let k=ol(m);if(k.isOk()){let j=k[0][0],C=k[0][1];return Pe(d,s+"-"+j,C)}else return d});return Ci(l,u,s)}else{let o=n.elements;return Ci(o,i,s)}}}function qi(e){return Mi(e,V(),"0")}function hn(e,t){return new De(e,t,!1)}function zi(e,t){return new _t("on"+e,t)}function I(e){return hn("class",e)}function Pi(e){return hn("type",e)}function Ii(e){return hn("value",e)}function ve(e,t,r){return e==="area"?new y("","",e,t,a([]),!1,!0):e==="base"?new y("","",e,t,a([]),!1,!0):e==="br"?new y("","",e,t,a([]),!1,!0):e==="col"?new y("","",e,t,a([]),!1,!0):e==="embed"?new y("","",e,t,a([]),!1,!0):e==="hr"?new y("","",e,t,a([]),!1,!0):e==="img"?new y("","",e,t,a([]),!1,!0):e==="input"?new y("","",e,t,a([]),!1,!0):e==="link"?new y("","",e,t,a([]),!1,!0):e==="meta"?new y("","",e,t,a([]),!1,!0):e==="param"?new y("","",e,t,a([]),!1,!0):e==="source"?new y("","",e,t,a([]),!1,!0):e==="track"?new y("","",e,t,a([]),!1,!0):e==="wbr"?new y("","",e,t,a([]),!1,!0):new y("","",e,t,r,!1,!1)}function Zt(e,t){if(e instanceof y){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,l=e.void;return new y(t,r,n,i,s,o,l)}else if(e instanceof Le){let r=e.subtree;return new Le(()=>Zt(r(),t))}else if(e instanceof Ge){let n=e.elements,i=Ut(n,(s,o)=>{if(s instanceof y){let l=s.key,u=l===""?t+"-"+g(o):t+"-"+l;return Zt(s,u)}else return Zt(s,t)});return new Ge(i,t)}else return e}function Fi(e,t){return e(v(t,r=>{let n=r[0],i=r[1];return Zt(i,n)}))}function Gi(e){return new Fe(e)}var wn=class extends p{constructor(t){super(),this.dict=t}};function Bi(){return new wn(V())}var Xt=class extends p{constructor(t){super(),this[0]=t}},Qt=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},er=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};function Ui(e){return h(e.created,V())&&h(e.removed,Bi())&&h(e.updated,V())}var tr=class extends p{constructor(t){super(),this[0]=t}},rr=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},mt=class extends p{constructor(t){super(),this[0]=t}},re=class extends p{constructor(t){super(),this[0]=t}},ht=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},nr=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};var wt=class extends p{},ir=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},sr=class extends p{constructor(t){super(),this[0]=t}},or=class extends p{constructor(t){super(),this[0]=t}};function xn(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);l.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);l.appendChild(u),n??=u}else if(o.tag!==void 0){let u=dl({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&l.replaceChild(u,s):l.appendChild(u),n??=u}else if(o.elements!==void 0)for(let u of lr(o))i.unshift({prev:s,next:u,parent:l}),s=s?.nextSibling}return n}function dl({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(xt.has(o))l=xt.get(o);else{let b=new Map;xt.set(o,b),l=b}let u=s?new Set(l.keys()):null,d=s?new Set(Array.from(e.attributes,b=>b.name)):null,m=null,k=null,j=null;if(s&&t.tag==="textarea"){let b=t.children[Symbol.iterator]().next().value?.content;b!==void 0&&(o.value=b)}for(let b of t.attrs){let E=b[0],F=b[1];if(b.as_property)o[E]!==F&&(o[E]=F),s&&d.delete(E);else if(E.startsWith("on")){let ie=E.slice(2),Er=r(F,ie==="input");l.has(ie)||o.addEventListener(ie,gt),l.set(ie,Er),s&&u.delete(ie)}else if(E.startsWith("data-lustre-on-")){let ie=E.slice(15),Er=r(_l);l.has(ie)||o.addEventListener(ie,gt),l.set(ie,Er),o.setAttribute(E,F)}else E==="class"?m=m===null?F:m+" "+F:E==="style"?k=k===null?F:k+F:E==="dangerous-unescaped-html"?j=F:(o.getAttribute(E)!==F&&o.setAttribute(E,F),(E==="value"||E==="selected")&&(o[E]=F),s&&d.delete(E))}if(m!==null&&(o.setAttribute("class",m),s&&d.delete("class")),k!==null&&(o.setAttribute("style",k),s&&d.delete("style")),s){for(let b of d)o.removeAttribute(b);for(let b of u)l.delete(b),o.removeEventListener(b,gt)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(j!==null)return o.innerHTML=j,o;let C=o.firstChild,vt=null,Hn=null,Jn=null,jr=yt(t).next().value;if(s&&jr!==void 0&&jr.key!==void 0&&jr.key!==""){vt=new Set,Hn=Hi(e),Jn=Hi(t);for(let b of yt(t))C=$l(C,b,o,n,Jn,Hn,vt)}else for(let b of yt(t))n.unshift({prev:C,next:b,parent:o}),C=C?.nextSibling;for(;C;){let b=C.nextSibling;o.removeChild(C),C=b}return o}var xt=new WeakMap;function gt(e){let t=e.currentTarget;if(!xt.has(t)){t.removeEventListener(e.type,gt);return}let r=xt.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,gt);return}r.get(e.type)(e)}function _l(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let u=0,d=s,m=e;u<l.length;u++)u===l.length-1?d[l[u]]=m[l[u]]:(d[l[u]]??={},m=m[l[u]],d=d[l[u]]);return s},{data:n})}}function Hi(e){let t=new Map;if(e)for(let r of yt(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function $l(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0){for(let u of yt(t))n.unshift({prev:e,next:u,parent:r}),e=e?.nextSibling;return e}if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*yt(e){for(let t of e.children)yield*lr(t)}function*lr(e){if(e.elements!==void 0)for(let t of e.elements)yield*lr(t);else e.subtree!==void 0?yield*lr(e.subtree()):yield e}var gn=class e{static start({init:t,update:r,view:n},i,s){if(!bn())return new f(new bt);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new f(new ur(i));let l=new e(o,t(s),r,n);return new c(u=>l.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.requestAnimationFrame(()=>this.#n(n.all.toArray(),!0))}root;send(t){if(t instanceof mt){if(t[0]instanceof or){this.#t=window.cancelAnimationFrame(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let u=s(l);u instanceof c&&this.send(new re(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));xn(i,r,n)}}else if(t instanceof re){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.cancelAnimationFrame(this.#t),this.#n()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#n()))}else if(t instanceof ht){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof wt)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[],r=!1){if(this.#t=void 0,!this.#o(t,r))return;let n=this.#r(this.#e),i=(o,l=!1)=>u=>{let d=o(u);d instanceof c&&this.send(new re(d[0],l))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));xn(s,n,i)}#o(t=[],r=!1){for(;this.#i.length>0;){let n=this.#i.shift(),[i,s]=this.#s(this.#e,n);r||=this.#e!==i,t=t.concat(s.all.toArray()),this.#e=i}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new re(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{}});return this.#i.length>0?this.#o(t,r):r}},Ji=gn.start;var yn=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new c(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=qi(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof tr){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof f||this.#r.push(i)}this.#l()}else if(t instanceof rr)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof mt))if(t instanceof re)this.#r.push(t[0]),this.#l();else if(t instanceof ht){let r=new Qt(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof nr){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof f)return;this.#r.push(n[0]),this.#l()}else if(t instanceof ir){let r=Dt(this.#u),n=new er(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof sr&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){if(!this.#a(!1,t))return;let r=this.#i(this.#e),n=elements(this.#t,r);if(!Ui(n)){let i=new Xt(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=!1,r=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[i,s]=this.#s(this.#e,n);t||=this.#e!==i,r=r.concat(s.all.toArray()),this.#e=i}for(;r.length>0;)r.shift()({dispatch:l=>this.send(new re(l)),emit:(l,u)=>this.root.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:!0,composed:!0})),select:()=>{}});return this.#r.length>0?this.#a(t,r):t}},ml=yn.start,bn=()=>globalThis.window&&window.document;var kn=class extends p{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var ur=class extends p{constructor(t){super(),this.selector=t}},bt=class extends p{};function Ki(e,t,r){return new kn(e,t,r,new w)}function Wi(e,t,r){return le(!bn(),new f(new bt),()=>Ji(e,t,r))}function je(e){return Gi(e)}function Vi(e,t){return ve("h1",e,t)}function $e(e,t){return ve("div",e,t)}function ar(e,t){return ve("button",e,t)}function pr(e){return ve("input",e,a([]))}function Yi(e,t){return ve("label",e,t)}var me=class extends p{},he=class extends p{},fr=class extends p{},dr=class extends p{},Re=class extends p{},_r=class extends p{},$r=class extends p{},mr=class extends p{},hr=class extends p{};var we=class extends p{},kt=class extends p{};function Xi(e){return e instanceof $r?"connect":e instanceof Re?"delete":e instanceof me?"get":e instanceof fr?"head":e instanceof mr?"options":e instanceof hr?"patch":e instanceof he?"post":e instanceof dr?"put":e instanceof _r?"trace":e[0]}function Qi(e){return e instanceof we?"http":"https"}var ne=class extends p{constructor(t,r){super(),this.encoder=t,this.decoder=r}},At=class extends p{constructor(t,r){super(),this.encoder=t,this.decoder=r}},Ee=class extends p{constructor(t,r,n,i,s,o,l,u){super(),this.method=t,this.scheme=r,this.host=n,this.port=i,this.has_body=s,this.path_converter=o,this.req_body_converter=l,this.res_body_converter=u}};var On=class extends p{constructor(t,r,n){super(),this.id=t,this.name=r,this.amount=n}},Te=class extends p{constructor(t,r){super(),this.name=t,this.amount=r}};function es(e){return Wt(a([["id",_e(e.id)],["name",_e(e.name)],["amount",dt(e.amount)]]))}function ts(e){let t=e;return Ur((r,n,i)=>new On(r,n,i),D("id",G),D("name",G),D("amount",at))(t)}function wl(e){return mn(e,es)}function xl(e){let t=e;return Pt(ts)(t)}function gl(e){return Wt(a([["name",_e(e.name)],["amount",dt(e.amount)]]))}function yl(e){let t=e;return Rr((r,n)=>new Te(r,n),D("name",G),D("amount",at))(t)}var Ln=new ne(es,ts),rs=new ne(wl,xl),vn=new ne(gl,yl);var xr=class extends p{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function as(e){let t=(()=>{let l=e.fragment;if(l instanceof $){let u=l[0];return a(["#",u])}else return a([])})(),r=(()=>{let l=e.query;if(l instanceof $){let u=l[0];return _("?",_(u,t))}else return t})(),n=_(e.path,r),i=(()=>{let l=e.host,u=it(e.path,"/");if(l instanceof $&&!u&&l[0]!==""){let d=l[0];return _("/",n)}else return n})(),s=(()=>{let l=e.host,u=e.port;if(l instanceof $&&u instanceof $){let d=u[0];return _(":",_(g(d),i))}else return i})(),o=(()=>{let l=e.scheme,u=e.userinfo,d=e.host;if(l instanceof $&&u instanceof $&&d instanceof $){let m=l[0],k=u[0],j=d[0];return _(m,_("://",_(k,_("@",_(j,s)))))}else if(l instanceof $&&u instanceof w&&d instanceof $){let m=l[0],k=d[0];return _(m,_("://",_(k,s)))}else if(l instanceof $&&u instanceof $&&d instanceof w){let m=l[0];return _(m,_(":",s))}else if(l instanceof $&&u instanceof w&&d instanceof w){let m=l[0];return _(m,_(":",s))}else if(l instanceof w&&u instanceof w&&d instanceof $){let m=d[0];return _("//",_(m,s))}else return s})();return st(o)}function Gl(e,t){return r=>z(Pt(Nt)(r),n=>{if(e>=0){let o=ot(n,e),l=Rt(o),u=et(l,a([new U("A list with at least"+g(e+1)+"elements","A list with"+g(un(n))+"elements",a([g(e)]))]));return L(u,t)}else return new f(a([new U("An 'index' decoder with a non-negative index",g(e),a([]))]))})}function Dl(e,t){return zt(a([oi(e,t),D(g(e),t),Gl(e,t)]))}function Tn(e,t,r){if(e.hasLength(0))return t(r);{let n=e.head,i=e.tail,s=oe(n);if(s.isOk()){let o=s[0],l=r,u=Dl(o,Nt)(l);return L(u,d=>Tn(i,t,d))}else{let o=r,l=D(n,Nt)(o);return L(l,u=>Tn(i,t,u))}}}function cs(e,t){return r=>Tn(e,t,r)}function Ot(e,t){return zi(e,t)}function fs(e){let t=e;return D("target",D("value",G))(t)}var gr=class extends p{constructor(t,r,n,i,s,o,l,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=u}};function $s(e){return new xr(new $(Qi(e.scheme)),new w,new $(e.host),e.port,e.path,e.query,new w)}function Sn(e,t,r){let n=Ie(e.headers,ge(t),r);return e.withFields({headers:n})}function Cn(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,l=e.path,u=e.query;return new gr(r,n,t,i,s,o,l,u)}function Mn(e,t){return e.withFields({method:t})}function ms(){return new gr(new me,a([]),"",new kt,"localhost",new w,"",new w)}function hs(e,t){return e.withFields({scheme:t})}function ws(e,t){return e.withFields({host:t})}function xs(e,t){return e.withFields({port:new $(t)})}function gs(e,t){return e.withFields({path:t})}var ue=class extends p{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var Ue=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function yr(e){return Promise.resolve(Ue.wrap(e))}function bs(e,t){return e.then(r=>t(Ue.unwrap(r)))}function br(e,t){return e.then(r=>Ue.wrap(t(Ue.unwrap(r))))}function qn(e,t){return e.catch(r=>t(r))}function ks(e,t){return br(e,n=>(t(n),n))}function kr(e,t){return bs(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return yr(new f(i))}})}async function Os(e){try{return new c(await fetch(e))}catch(t){return new f(new Ar(t.toString()))}}function Ls(e){return new ue(e.status,T.fromArray([...e.headers]),e)}function vs(e){let t=as($s(e)),r=Xi(e.method).toUpperCase(),n={headers:Jl(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function Jl(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function Nn(e){let t;try{t=await e.body.text()}catch{return new f(new Or)}return new c(e.withFields({body:t}))}var Ar=class extends p{constructor(t){super(),this[0]=t}},Or=class extends p{};function js(e){let r=vs(e),n=Os(r);return kr(n,i=>yr(new c(Ls(i))))}var zn=class extends p{constructor(t){super(),this[0]=t}},Pn=class extends p{constructor(t){super(),this[0]=t}},Lr=class extends p{},In=class extends p{},Fn=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},Gn=class extends p{},Dn=class extends p{constructor(t){super(),this.run=t}};function Wl(e,t,r){let n=js(e),i=kr(n,Nn),s=br(i,l=>{if(l.isOk()){let u=l[0];return t.run(new c(u))}else return t.run(new f(new Lr))}),o=qn(s,l=>t.run(new f(new Lr)));ks(o,r)}function Es(e,t){return Si(r=>Wl(e,t,r))}function Vl(e){if(e instanceof ue&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new c(r)}else{if(e instanceof ue&&e.status===401)return new f(new Gn);if(e instanceof ue&&e.status===404)return new f(new In);if(e instanceof ue&&e.status===500){let t=e.body;return new f(new zn(t))}else{let t=e.status,r=e.body;return new f(new Fn(t,r))}}}function Ts(e,t){return new Dn(r=>{let i=L(r,Vl),s=L(i,o=>{let l=dn(o,e);if(l.isOk()){let u=l[0];return new c(u)}else{let u=l[0];return new f(new Pn(u))}});return t(s)})}var Ke=class extends p{constructor(t){super(),this.name=t}},We=class extends p{constructor(t){super(),this.id=t}},Ve=class extends p{constructor(t,r){super(),this.id=t,this.update=r}},Se=class extends p{constructor(t){super(),this[0]=t}},Ce=class extends p{constructor(t){super(),this[0]=t}},Me=class extends p{constructor(t){super(),this[0]=t}},Ye=class extends p{constructor(t){super(),this[0]=t}};function Ss(){let e=t=>{let r=a(["target","previousElementSibling","value"]),n=t,i=cs(r,G)(n);return N(i,s=>new Ke(s))};return $e(a([I("bg-neutral-800 p-2 rounded-md w-fit mx-auto")]),a([pr(a([I("bg-neutral-700 hover:bg-neutral-600 rounded-sm text-neutral-100")])),ar(a([I("ml-2 text-neutral-100 font-bold hover:bg-neutral-700 px-1"),Ot("click",e)]),a([je("New")]))]))}function Cs(e){let t=n=>{let i=fs(n),s=Cr(i),o=L(s,oe),l=N(o,u=>new Ve(e.id,new Te(e.name,u)));return et(l,a([]))},r=n=>new c(new We(e.id));return $e(a([]),a([Yi(a([I("flex justify-between gap-4 pb-1 border-b border-neutral-900")]),a([je(e.name),pr(a([Pi("number"),Ii(g(e.amount)),I("w-1/3 pl-2 rounded-sm bg-white/50 hover:bg-white/75"),Ot("input",t)])),ar(a([I("w-6 h-6 flex justify-center rounded-full bg-red-500 hover:bg-red-600 text-white font-bold"),Ot("click",r)]),a([je("x")]))]))]))}function Ms(e){return Fi(t=>$e(a([I("flex flex-col gap-2 pb-2")]),t),v(e,t=>{let r=t[0],n=t[1],i=Cs(n);return[r,i]}))}function Bn(e){return new At(t=>e,t=>le(h(t,e),new c(void 0),()=>new f(void 0)))}function Rn(e){return new At(t=>X(e,a([t])),t=>{let r=O(e),n=O(t);if(n.atLeastLength(1)&&h(n.tail,r)){let i=n.head,s=n.tail;return new c(i)}else return new f(void 0)})}function Un(){return new ne(e=>Ti(),e=>new c(void 0))}function qs(e,t,r){let n=(()=>{let s=ms(),o=Mn(s,e.method),l=hs(o,e.scheme),u=ws(l,e.host),d=xs(u,e.port);return gs(d,(()=>{let m=t,k=e.path_converter.encoder(m);return Y(k,"/")})())})();if(e.has_body){let o=Cn(n,(()=>{let l=r,u=e.req_body_converter.encoder(l);return _n(u)})());return Sn(o,"Content-Type","application/json")}else return n}function Lt(e,t,r,n){return Es(qs(e,t,r),Ts(e.res_body_converter.decoder,n))}function zs(){return new Ee(new me,new we,"localhost",2345,!1,Bn(a(["items"])),Un(),rs)}function Ps(){return new Ee(new he,new we,"localhost",2345,!0,Bn(a(["items"])),vn,Ln)}function Is(){return new Ee(new he,new we,"localhost",2345,!0,Rn(a(["items"])),vn,Ln)}function Fs(){return new Ee(new Re,new we,"localhost",2345,!1,Rn(a(["items"])),Un(),new ne(_e,G))}function Gs(e){return Lt(Ps(),void 0,new Te(e,0),t=>new Se(t))}function Ds(){return Lt(zs(),void 0,void 0,e=>new Ce(e))}function Bs(e,t){return Lt(Is(),e,t,r=>new Me(r))}function Rs(e){return Lt(Fs(),e,void 0,t=>new Ye(t))}function eu(e){let t=a([]),r=Ds();return[t,r]}function tu(e,t){return _([t.id,t],e)}function ru(e){return v(e,r=>[r.id,r])}function nu(e,t){return Ie(e,t.id,t)}function iu(e,t){let r=pn(e,t);return r.isOk()?r[0][1]:e}function su(e,t){if(t instanceof Ke){let r=t.name;return[e,Gs(r)]}else if(t instanceof Ve){let r=t.id,n=t.update;return[e,Bs(r,n)]}else if(t instanceof We){let r=t.id;return[e,Rs(r)]}else if(t instanceof Se&&t[0].isOk()){let r=t[0][0];return[tu(e,r),te()]}else{if(t instanceof Se&&!t[0].isOk())return[e,te()];if(t instanceof Ce&&t[0].isOk()){let r=t[0][0];return[ru(r),te()]}else{if(t instanceof Ce&&!t[0].isOk())return[e,te()];if(t instanceof Me&&t[0].isOk()){let r=t[0][0];return[nu(e,r),te()]}else{if(t instanceof Me&&!t[0].isOk())return[e,te()];if(t instanceof Ye&&t[0].isOk()){let r=t[0][0];return[iu(e,r),te()]}else return[e,te()]}}}}function ou(e){return $e(a([I("mx-auto p-4 bg-yellow-200 w-fit mt-16 rounded-md")]),a([Vi(a([I("text-xl font-bold text-center mb-4")]),a([je("My shopping list")])),Ms(e),Ss()]))}function Us(){let e=Ki(eu,su,ou),t=Wi(e,"#app",void 0);if(!t.isOk())throw ae("assignment_no_match","app",18,"main","Assignment pattern did not match",{value:t})}Us();
